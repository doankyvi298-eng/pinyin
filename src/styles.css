/* Kids Cartoon-Tech Theme */
:root { --bg:#0e1329; --panel:rgba(14,19,41,.78); --text:#f6fbff; --muted:#b6c6e3; --accent:#5ee1ff; --ok:#22c55e; }
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font:15px/1.55 ui-rounded,system-ui,-apple-system,Segoe UI,Roboto,Arial,"PingFang SC","Microsoft YaHei",sans-serif;color:var(--text);background:
  radial-gradient(1200px 600px at 15% 10%, #16214a 0%, var(--bg) 60%),
  repeating-linear-gradient(90deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 42px),
  repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 42px);
  overflow-x:hidden}
body::before,body::after{content:"";position:fixed;inset:-20vmax;pointer-events:none;z-index:-1;background:
  radial-gradient(closest-side, rgba(94,225,255,.18), rgba(94,225,255,0) 60%) 20% 22%/42vmax 42vmax no-repeat,
  radial-gradient(closest-side, rgba(139,92,246,.16), rgba(139,92,246,0) 60%) 78% 18%/48vmax 48vmax no-repeat,
  radial-gradient(closest-side, rgba(251,191,36,.14), rgba(251,191,36,0) 60%) 70% 80%/36vmax 36vmax no-repeat;filter:blur(.5px);animation:float-rot 42s linear infinite}
body::after{animation-direction:reverse;opacity:.85}
@keyframes float-rot{from{transform:rotate(0)}to{transform:rotate(360deg)}}

.app-header{text-align:center;padding:26px 16px 8px}.app-header h1{margin:0;font-size:30px;text-shadow:0 3px 16px rgba(94,225,255,.25)}.subtitle{margin:6px 0 0;color:var(--muted)}
.app-main{max-width:960px;margin:0 auto;padding:12px 16px 40px;position:relative}
.toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center;background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 14px;backdrop-filter:blur(8px) saturate(120%);box-shadow:0 10px 30px rgba(0,0,0,.25),inset 0 1px 0 rgba(255,255,255,.06)}
.toolbar label{color:var(--muted)} .toolbar select{padding:8px 10px;border-radius:10px;border:1px solid #263041;background:#0c1430;color:var(--text)}
.btn{cursor:pointer;padding:9px 14px;border-radius:12px;border:1px solid rgba(94,225,255,.35);background:linear-gradient(180deg,#0f1a3a,#0b142b);color:var(--text);transition:transform .06s ease,background .2s,box-shadow .2s;box-shadow:0 6px 14px rgba(0,0,0,.25),0 0 0 2px rgba(94,225,255,.12) inset}
.btn:hover{background:linear-gradient(180deg,#13224b,#0d1837);box-shadow:0 8px 18px rgba(0,0,0,.35),0 0 0 2px rgba(94,225,255,.2) inset}
.btn:active{transform:translateY(1px)} .btn.primary{border-color:rgba(251,191,36,.45);background:linear-gradient(180deg,#152a4f,#0f2144);box-shadow:0 8px 18px rgba(0,0,0,.35),0 0 0 2px rgba(251,191,36,.18) inset}
.stats{display:inline-flex;gap:14px;margin-left:auto;align-items:center} .stats strong{color:#fff;font-variant-numeric:tabular-nums}

.board-wrap{display:grid;place-items:center;padding:22px 0}
.board{--cols:4;width:min(86vmin,640px);display:grid;grid-template-columns:repeat(var(--cols),1fr);gap:10px;padding:14px;background:linear-gradient(160deg,rgba(20,31,67,.85),rgba(10,20,46,.85));border-radius:18px;border:1px solid rgba(255,255,255,.08);box-shadow:0 16px 40px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.06)}

.card{position:relative;aspect-ratio:1;display:grid;place-items:center;border-radius:16px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(160deg,#22d3ee,#3b82f6);color:#f7fbff;font-weight:900;font-size:clamp(18px,5.4vmin,30px);text-shadow:0 2px 0 rgba(0,0,0,.25);user-select:none;transition:transform .08s ease,outline-color .2s,background .2s;box-shadow:0 6px 14px rgba(0,0,0,.25),0 10px 22px rgba(59,130,246,.22),0 0 0 3px rgba(255,255,255,.06) inset}
.card.pinyin{font-family:ui-monospace,Menlo,Consolas,monospace;font-weight:800}
.card:hover{transform:translateY(-2px)}
.card.selected{outline:3px solid var(--warn);box-shadow:0 0 0 4px rgba(251,191,36,.25) inset,0 10px 22px rgba(251,191,36,.18)}
.card.matched{visibility:hidden}
.card.hint{outline:3px dashed var(--ok)}

.help{color:var(--muted);text-align:center} .help ul{margin:8px auto 0;padding:0;list-style:none;display:inline-flex;gap:12px;flex-wrap:wrap} .help li{background:rgba(255,255,255,.06);padding:6px 10px;border-radius:10px}
.app-footer{text-align:center;padding:16px;color:var(--muted)}
/* Kids mode tweaks */
body.kids .board { width: min(92vmin, 700px); gap: 12px; }
body.kids .card { font-size: clamp(20px, 6.6vmin, 34px); border-radius: 20px; }
.toolbar .toggle { display: inline-flex; gap: 6px; align-items: center; padding: 2px 6px; border-radius: 8px; background: rgba(255,255,255,0.06); }

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:grid;place-items:center;z-index:50}
.modal.hidden{display:none}
.modal-box{min-width:min(92vw,420px);max-width:92vw;background:var(--panel);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:18px 16px;box-shadow:0 20px 50px rgba(0,0,0,.5)}
.modal-box h2{margin:0 0 6px;font-size:22px}
.modal-box .stars{font-size:22px;letter-spacing:4px}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}

/* Show pinyin ID as small subtext when needed */

/* Tone mark overlay rendering */
.tone-wrap{display:inline-flex;gap:.02em;align-items:flex-end}
.tone-letter{position:relative;display:inline-block;line-height:1}
.tone-letter.has-tone{padding-top:.2em}
.tone-mark{position:absolute;left:50%;transform:translateX(-50%);top:-0.58em;font-size:.82em;line-height:1}
.tone-mark.t1{content:"\u02C9"} /* ˉ */
.tone-mark.t2{content:"\u02CA"} /* ˊ */
.tone-mark.t3{content:"\u02C7"} /* ˇ */
.tone-mark.t4{content:"\u02CB"} /* ˋ */

/* Light Board Theme (white board, black text) */
.board{ background:#ffffff !important; border:1px solid #e5e7eb !important; box-shadow:none !important }
.card{ background:#ffffff !important; color:#111827 !important; border:1px solid #d1d5db !important; box-shadow:none !important; text-shadow:none !important }
.card.pinyin{ color:#111827 !important }
/* State colors */
.card.selected, .card.checking{ color:#111827 !important; border-color:#94a3b8 !important }
.card.correct{ color:#16a34a !important; border-color:#16a34a !important }
.card.wrong{ color:#dc2626 !important; border-color:#dc2626 !important }
.tone-mark{ color:#dc2626 !important }

.card{ overflow: hidden }
